<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="100"
             x:Class="HyPrism.UI.Components.Inputs.ActionInput"
             x:Name="Root">
             
    <StackPanel Spacing="8">
        <!-- Label -->
        <TextBlock Text="{Binding ElementName=Root, Path=Label}" 
                   FontSize="15" 
                   FontWeight="SemiBold" 
                   Foreground="White"
                   IsVisible="{Binding ElementName=Root, Path=Label, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
        
        <!-- Input Container -->
        <Border Background="#252525" 
                CornerRadius="8" 
                Padding="8"
                BorderBrush="#333"
                BorderThickness="1">
            <Grid ColumnDefinitions="*, Auto" ColumnSpacing="8">
                
                <!-- The Input Field -->
                <TextBox Grid.Column="0"
                         Text="{Binding ElementName=Root, Path=Text, Mode=TwoWay}"
                         Watermark="{Binding ElementName=Root, Path=Watermark}"
                         IsReadOnly="{Binding ElementName=Root, Path=IsReadOnly}"
                         MaxLength="{Binding ElementName=Root, Path=MaxLength}"
                         Background="Transparent"
                         BorderThickness="0"
                         FontSize="14"
                         VerticalAlignment="Center">
                     <TextBox.Styles>
                        <Style Selector="TextBox:focus /template/ Border#PART_BorderElement">
                            <Setter Property="Background" Value="Transparent"/>
                            <Setter Property="BorderThickness" Value="0"/>
                        </Style>
                        <Style Selector="TextBox:pointerover /template/ Border#PART_BorderElement">
                             <Setter Property="Background" Value="Transparent"/>
                             <Setter Property="BorderThickness" Value="0"/>
                        </Style>
                     </TextBox.Styles>
                </TextBox>
                
                <!-- Action Buttons Area -->
                <ContentPresenter Grid.Column="1" 
                                  Content="{Binding ElementName=Root, Path=RightContent}"
                                  VerticalAlignment="Center"/>
            </Grid>
        </Border>
    </StackPanel>
</UserControl>